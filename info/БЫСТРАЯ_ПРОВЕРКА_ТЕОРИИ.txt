═══════════════════════════════════════════════════════════════════════════
БЫСТРАЯ ПРОВЕРКА: ГЕНЕРАЦИЯ ТЕОРИИ РАБОТАЕТ?
═══════════════════════════════════════════════════════════════════════════

3 ПРОСТЫХ ШАГА ДЛЯ ПРОВЕРКИ:

═══════════════════════════════════════════════════════════════════════════

ШАГ 1: ЗАПУСТИТЕ OLLAMA
───────────────────────────────────────────────────────────────────────────

Откройте терминал и выполните:

    ollama serve

Должно появиться:
  ✅ "Listening on 127.0.0.1:11434"

Если команда не найдена:
  ❌ Установите Ollama: https://ollama.ai/download

ВАЖНО: Оставьте этот терминал открытым!

═══════════════════════════════════════════════════════════════════════════

ШАГ 2: ПРОВЕРЬТЕ МОДЕЛЬ
───────────────────────────────────────────────────────────────────────────

В НОВОМ терминале выполните:

    ollama list

Должна быть строка:
  ✅ deepseek-r1:7b    ...    5.0 GB

Если модели нет:
  ❌ Скачайте: ollama pull deepseek-r1:7b
  ⏱️  Время загрузки: ~5-15 минут

═══════════════════════════════════════════════════════════════════════════

ШАГ 3: ЗАПУСТИТЕ ТЕСТ
───────────────────────────────────────────────────────────────────────────

Выполните:

    python test_theory_generation.py

Ожидайте:
  ⏱️  Время: 3-10 минут
  📊 Тесты: 10 различных предметов

Результат должен быть:
  ✅ 10/10 тестов пройдено (100%)

Если меньше 100%:
  ❌ Читайте ДИАГНОСТИКА_ТЕОРИИ.txt

═══════════════════════════════════════════════════════════════════════════

ЧТО ВЫ УВИДИТЕ ПРИ УСПЕХЕ:

[1] Проверка доступности LLM...
✅ LLM клиент доступен

================================================================================
ТЕСТ: Алгебра / Уравнения / Линейные уравнения
================================================================================

[INFO] Генерация объяснения через LLM: Алгебра/Уравнения/Линейные уравнения
[INFO] Создание промпта для темы: Линейные уравнения
[INFO] Контекст: стиль=математический, фокус=формулы и уравнения
[INFO] Отправка запроса к LLM...
[INFO] Получен ответ от LLM (длина: 1543)
[INFO] Очистка ответа от служебных тегов...
[INFO] Сохранение в кэш...
[INFO] Объяснение сохранено в кэш: bot\explanations\lineinye_uravneniya.txt
[SUCCESS] Объяснение успешно сгенерировано и сохранено
Генерация объяснения темы...
✅ УСПЕХ! Длина объяснения: 1543 символов

Первые 300 символов:
--------------------------------------------------------------------------------
## Линейные уравнения

### Введение

Линейное уравнение — это математическое выражение, в котором неизвестная 
переменная входит в первой степени. Это один из базовых типов уравнений, 
с которым вы начинаете знакомство в школьном курсе алгебры...
--------------------------------------------------------------------------------

... (остальные тесты) ...

================================================================================
ИТОГИ ТЕСТИРОВАНИЯ
================================================================================

✅ PASS | Алгебра - Линейные уравнения
✅ PASS | Алгебра - Линейная функция
✅ PASS | Геометрия - Треугольники
✅ PASS | Физика - Кинематика
✅ PASS | Химия - Периодическая система
✅ PASS | Русский язык - Правописание корней
✅ PASS | Английский язык - Времена глаголов
✅ PASS | История - Древняя Греция
✅ PASS | Биология - Клеточная теория
✅ PASS | География - Климат

================================================================================
РЕЗУЛЬТАТ: 10/10 тестов пройдено (100%)
================================================================================

🎉 ВСЕ ТЕСТЫ ПРОШЛИ УСПЕШНО!

═══════════════════════════════════════════════════════════════════════════

БЫСТРАЯ ДИАГНОСТИКА ПРОБЛЕМ:

❌ "ollama: command not found"
   → Установите Ollama: https://ollama.ai/

❌ "Connection refused"
   → Запустите: ollama serve

❌ "Model not found"
   → Скачайте: ollama pull deepseek-r1:7b

❌ "LLM клиент не инициализирован"
   → Перезапустите Ollama

❌ Тесты не проходят
   → Читайте ДИАГНОСТИКА_ТЕОРИИ.txt

═══════════════════════════════════════════════════════════════════════════

ПРОВЕРКА КЭША:

После первого запуска проверьте папку:

    ls -lh bot/explanations/

Должны появиться файлы:
  lineinye_uravneniya.txt
  lineinaia_funktsiia.txt
  treugolniki.txt
  kinematika.txt
  ... и другие

Второй запуск теста будет МГНОВЕННЫМ (чтение из кэша).

═══════════════════════════════════════════════════════════════════════════

ИСПОЛЬЗОВАНИЕ В КОДЕ:

from bot.theory import theory_manager

# Генерация с кэшем
explanation = theory_manager.get_topic_explanation(
    subject="Физика",
    section="Механика",
    topic="Кинематика"
)

# Принудительная регенерация (игнорирует кэш)
explanation = theory_manager.get_topic_explanation(
    subject="Физика",
    section="Механика",
    topic="Кинематика",
    regenerate=True
)

═══════════════════════════════════════════════════════════════════════════

ПРОИЗВОДИТЕЛЬНОСТЬ:

Первая генерация:
  ⏱️  3-10 секунд
  📦 Размер: ~1500-3000 символов

Последующие запросы (из кэша):
  ⚡ < 1 миллисекунды
  💾 Чтение с диска

═══════════════════════════════════════════════════════════════════════════

СИСТЕМНЫЕ ТРЕБОВАНИЯ:

Минимум:
  CPU: Любой
  RAM: 8GB
  Диск: 5GB (для модели)

Рекомендуется:
  CPU: 4+ ядра
  RAM: 16GB
  GPU: Опционально (ускоряет в 3-5 раз)

═══════════════════════════════════════════════════════════════════════════

ГОТОВО! 🎉

Если все 3 шага выполнены успешно - генерация теории работает!

Полная документация:
  📚 ДИАГНОСТИКА_ТЕОРИИ.txt
  📝 THEORY_FIX_CHANGELOG.txt

═══════════════════════════════════════════════════════════════════════════

