================================================================================
                        ИСПРАВЛЕНИЕ ПРОБЛЕМЫ С ПУТЕМ
================================================================================

ПРОБЛЕМА:
---------
База данных metrics.db создавалась в неправильном месте:
- Ожидалось: E:\Python\Sites\WebVA\logger\reports\metrics.db
- Создавалось: E:\Python\Sites\WebVA\UI\logger\reports\metrics.db

ПРИЧИНА:
--------
Относительный путь "logger/reports/metrics.db" разрешался относительно 
текущей рабочей директории (откуда запущен процесс), а не корня проекта.

Когда Flask запускался из директории UI/, путь разрешался как:
UI/ + logger/reports/metrics.db = UI/logger/reports/metrics.db

РЕШЕНИЕ:
--------
Изменен код для использования АБСОЛЮТНОГО пути:

1. В logger/exporter.py:
   - Добавлен импорт Path из pathlib
   - Метод __init__ теперь автоматически определяет корень проекта
   - Путь к БД вычисляется относительно файла exporter.py
   - Результат: всегда E:\Python\Sites\WebVA\logger\reports\metrics.db

2. В logger/models.py:
   - Добавлена функция get_metrics_db_path()
   - Возвращает абсолютный путь к metrics.db
   - Используется во всех скриптах просмотра метрик

3. В logger/t.py:
   - Убран параметр db_path при создании SQLiteMetricExporter
   - Путь определяется автоматически

4. Обновлены все скрипты просмотра:
   - view_metrics.py
   - analyze_metrics.py
   - show_database_metrics.py
   - check_db.py
   
   Все теперь используют get_metrics_db_path() из logger/models.py

ПРОВЕРКА:
---------
После исправления:

1. Запустили test_metrics.py:
   [SQLiteMetricExporter] Инициализирован с БД: E:\Python\Sites\WebVA\logger\reports\metrics.db
   ✅ Путь правильный!

2. Проверили наличие файла:
   ls E:\Python\Sites\WebVA\logger\reports\
   ✅ metrics.db присутствует

3. Проверили просмотр метрик:
   python view_metrics.py
   ✅ Показывает 14 метрик

4. Проверили статистику:
   python show_database_metrics.py
   ✅ Показывает функции и их метрики

РЕЗУЛЬТАТ:
----------
✅ База данных теперь ВСЕГДА создается в правильном месте
✅ Независимо от директории запуска (UI/, корень, tests/ и т.д.)
✅ Все скрипты используют один и тот же путь
✅ Старая база из UI/logger/ удалена

ДОПОЛНИТЕЛЬНЫЕ ДЕЙСТВИЯ:
-------------------------
1. Обновлена документация (MONITORING_README_RU.txt)
2. Добавлен пункт в раздел "Устранение неполадок"
3. Указано использование абсолютного пути

ДАТА ИСПРАВЛЕНИЯ: 2026-01-02
================================================================================

