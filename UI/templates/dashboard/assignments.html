<!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞–Ω–∏–π -->
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">üìã –ó–∞–¥–∞–Ω–∏—è</h5>
        <div id="assignmentsActions"></div>
    </div>
    <div class="card-body">
        <div id="assignmentsContent">
            <div class="text-center py-4">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                </div>
                <p class="mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞–Ω–∏–π...</p>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è -->
<div class="modal fade" id="createAssignmentModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">üìù –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∫–ª–∞—Å—Å–∞</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="createAssignmentForm">
                    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è *</label>
                            <input type="text" class="form-control" id="assignmentTitle" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">–ü—Ä–µ–¥–º–µ—Ç *</label>
                            <select class="form-select" id="assignmentSubject" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç</option>
                                <option value="–ê–ª–≥–µ–±—Ä–∞">–ê–ª–≥–µ–±—Ä–∞</option>
                                <option value="–ì–µ–æ–º–µ—Ç—Ä–∏—è">–ì–µ–æ–º–µ—Ç—Ä–∏—è</option>
                                <option value="–§–∏–∑–∏–∫–∞">–§–∏–∑–∏–∫–∞</option>
                                <option value="–•–∏–º–∏—è">–•–∏–º–∏—è</option>
                                <option value="–ë–∏–æ–ª–æ–≥–∏—è">–ë–∏–æ–ª–æ–≥–∏—è</option>
                                <option value="–ò—Å—Ç–æ—Ä–∏—è">–ò—Å—Ç–æ—Ä–∏—è</option>
                                <option value="–ì–µ–æ–≥—Ä–∞—Ñ–∏—è">–ì–µ–æ–≥—Ä–∞—Ñ–∏—è</option>
                                <option value="–†—É—Å—Å–∫–∏–π —è–∑—ã–∫">–†—É—Å—Å–∫–∏–π —è–∑—ã–∫</option>
                                <option value="–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫</option>
                                <option value="–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞">–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</option>
                                <option value="–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ">–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">–¢–µ–º–∞</label>
                            <input type="text" class="form-control" id="assignmentTopic" 
                                   placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –õ–∏–Ω–µ–π–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</label>
                            <select class="form-select" id="assignmentDifficulty">
                                <option value="–õ—ë–≥–∫–∏–π">üü¢ –õ—ë–≥–∫–∏–π</option>
                                <option value="–°—Ä–µ–¥–Ω–∏–π" selected>üü° –°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="–•–∞—Ä–¥–∫–æ—Ä">üî¥ –•–∞—Ä–¥–∫–æ—Ä</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</label>
                        <textarea class="form-control" id="assignmentDescription" rows="2" 
                                  placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è"></textarea>
                    </div>
                    
                    <hr>
                    
                    <!-- –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è -->
                    <h6>üë• –ù–∞–∑–Ω–∞—á–∏—Ç—å –∫–ª–∞—Å—Å—É</h6>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">–ì–æ—Ä–æ–¥</label>
                            <input type="text" class="form-control" id="targetCity" 
                                   placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –≤—Å–µ—Ö">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">–®–∫–æ–ª–∞</label>
                            <input type="text" class="form-control" id="targetSchool" 
                                   placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –≤—Å–µ—Ö">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">–ö–ª–∞—Å—Å(—ã)</label>
                            <input type="text" class="form-control" id="targetClass" 
                                   placeholder="9–ê –∏–ª–∏ 9–ê, 9–ë">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">–î–µ–¥–ª–∞–π–Ω</label>
                        <input type="datetime-local" class="form-control" id="assignmentDeadline">
                    </div>
                    
                    <hr>
                    
                    <!-- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞ -->
                    <h6>üìù –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞</h6>
                    <div class="mb-3">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="generationType" 
                                   id="genLLM" value="llm" checked>
                            <label class="form-check-label" for="genLLM">ü§ñ –ß–µ—Ä–µ–∑ LLM (DeepSeek)</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="generationType" 
                                   id="genMath" value="math">
                            <label class="form-check-label" for="genMath">üî¢ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="generationType" 
                                   id="genManual" value="manual">
                            <label class="form-check-label" for="genManual">‚úçÔ∏è –í—Ä—É—á–Ω—É—é</label>
                        </div>
                    </div>
                    
                    <div id="questionCountSection" class="mb-3">
                        <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤</label>
                        <input type="number" class="form-control" id="questionCount" 
                               value="5" min="1" max="20">
                    </div>
                    
                    <div id="manualQuestionsSection" class="mb-3" style="display: none;">
                        <label class="form-label">–í–æ–ø—Ä–æ—Å—ã (JSON —Ñ–æ—Ä–º–∞—Ç)</label>
                        <textarea class="form-control" id="manualQuestions" rows="5" 
                                  placeholder='[{"question": "–í–æ–ø—Ä–æ—Å?", "options": ["–ê", "–ë", "–í", "–ì"], "correct_answer": "–ê"}]'></textarea>
                    </div>
                    
                    <button type="button" class="btn btn-outline-primary mb-3" onclick="generateTestPreview()">
                        üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ—Å—Ç–∞
                    </button>
                    
                    <div id="testPreview" class="mb-3" style="display: none;">
                        <div class="card">
                            <div class="card-header">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–æ–ø—Ä–æ—Å–æ–≤</div>
                            <div class="card-body" id="testPreviewContent"></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                <button type="button" class="btn btn-primary" onclick="createAssignment()">
                    ‚úÖ –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ
                </button>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞–¥–∞–Ω–∏—è -->
<div class="modal fade" id="assignmentStatsModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–¥–∞–Ω–∏—è</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="assignmentStatsContent">
                <div class="text-center py-4">
                    <div class="spinner-border text-primary" role="status"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ -->
<div class="modal fade" id="takeTestModal" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="takeTestTitle">üìù –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</h5>
                <span class="badge bg-secondary ms-2" id="testTimer">00:00</span>
            </div>
            <div class="modal-body" id="takeTestContent">
                <div class="text-center py-4">
                    <div class="spinner-border text-primary" role="status"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" onclick="cancelTest()">‚ùå –û—Ç–º–µ–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-success" id="submitTestBtn" 
                        onclick="submitTest()" disabled>
                    ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã
                </button>
            </div>
        </div>
    </div>
</div>
