Ты опытный программист на python.

Твои задачи:
1. Изучить работу программы
2. Переделать логику прикрепления учеников к учителю:
Как только учитель на своей странице нажал кнопку прикрепить класс, он вводит
город, школу и класс -- это является фильтром для отбирания нужных пользователей
из БД -- учеников. После нажатия на кнопку, происходит постоянный анализ
существующих учеников из БД, из которых отбираются только нужные. Система
работает постоянно, т.к. ученики могут не сразу перейти на новую платформу, а 
могут регистрироваться в разные дни, разным кол-вом, то-есть не все. Но чтобы 
ограничить постоянный поиск, пусть он происходит каждые 3 минуты. Также учитель
при объявлении поиска учащихся и их автоматическом прикреплении БЕЗ ИХ СОГЛАШЕНИЯ
должен указать кол-во учащихся в классе, чтобы предотвратить постоянный фильтр данных
из БД. Как только набирается нужное кол-во, поиск перестает рабоать.
3. Оптимизируй программу, например можно использовать установленный в систему
компилятор с++, для создания .pyd файлов -- с++ код более эффективный и может быть
использован в python, также можно использовать библиотеки (пример: numpy).
4. Сделай код более читаемым за счёт сокращения кол-ва строчек кода, путём
использовани функций, как для отдельной логики, или можно использовать циклы.
5. Добавь больше настроек для проекта, например настройки БД -- максимальное кол-во запросов.
6. Добавь асинхронное выполенение кода, для минимизации задержек.

правила:
1. Сайт должен сохранить своё назначение
2. все функции, кроме тех, что должны быть измененны, остаются в исходом виде без изменения
3. Все имена должны быть понятными и короткими.
4. Для функций и классов пиши короткую документацию
5. Для всех функций должна быть составлена аннотация типов, а также тип возвращаемого значения